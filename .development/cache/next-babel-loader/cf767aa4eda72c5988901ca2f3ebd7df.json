{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs2/helpers/interopRequireWildcard\");\n\nvar _Object$defineProperty2 = require(\"@babel/runtime-corejs2/core-js/object/define-property\");\n\n_Object$defineProperty2(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.RootProvider = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-property\"));\n\nvar _defineProperties = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-properties\"));\n\nvar _getOwnPropertyDescriptors = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\"));\n\nvar _getOwnPropertyDescriptor = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\"));\n\nvar _getOwnPropertySymbols = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/keys\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/promise\"));\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/assign\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs2/regenerator\"));\n\nvar _defineProperty3 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _api = _interopRequireDefault(require(\"../api\"));\n\nvar _router = require(\"next/router\");\n\nvar _reducers = require(\"./reducers\");\n\nvar _actions = require(\"./actions\");\n\nvar _jsxFileName = \"/Users/stanislavohstany/WebApps/DEV/coronamap/src/Context/index.js\";\nvar __jsx = _react.default.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = (0, _keys.default)(object); if (_getOwnPropertySymbols.default) { var symbols = (0, _getOwnPropertySymbols.default)(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return (0, _getOwnPropertyDescriptor.default)(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty3.default)(target, key, source[key]); }); } else if (_getOwnPropertyDescriptors.default) { (0, _defineProperties.default)(target, (0, _getOwnPropertyDescriptors.default)(source)); } else { ownKeys(Object(source)).forEach(function (key) { (0, _defineProperty2.default)(target, key, (0, _getOwnPropertyDescriptor.default)(source, key)); }); } } return target; }\n\nvar w = {\n  device: \"pc\"\n};\n\nif (true) {\n  w.device = window.innerWidth > 768 ? \"pc\" : \"mobile\";\n  document.body.classList.add(w.device);\n} // common global context\n\n\nvar RootContext = (0, _react.createContext)({});\n\nvar finalizeStore = function finalizeStore(_ref, single, _ref2, signal) {\n  var store, actions, reducer, loginStatus, logout, _ref3, reduce, actionExist;\n\n  return _regenerator.default.async(function finalizeStore$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          store = _ref.store, actions = _ref.actions, reducer = _ref.reducer;\n          loginStatus = _ref2.loginStatus, logout = _ref2.logout;\n          _ref3 = single || {}, reduce = _ref3.reduce;\n\n          if (reduce) {\n            _context.next = 5;\n            break;\n          }\n\n          return _context.abrupt(\"return\", false);\n\n        case 5:\n          actionExist = _objectSpread({}, actions[reduce] || {}, {}, single);\n\n          if (!(!actionExist.action || actionExist.api === false)) {\n            _context.next = 8;\n            break;\n          }\n\n          return _context.abrupt(\"return\", reducer(store, {\n            reduce: reduce,\n            data: actionExist.data || false\n          }));\n\n        case 8:\n          _context.t0 = reducer;\n          _context.t1 = store;\n          _context.t2 = reduce;\n          _context.next = 13;\n          return _regenerator.default.awrap((0, _api.default)(actionExist, signal, {\n            logout: logout,\n            loginStatus: loginStatus\n          }));\n\n        case 13:\n          _context.t3 = _context.sent;\n          _context.t4 = {\n            reduce: _context.t2,\n            data: _context.t3\n          };\n          _context.t5 = actionExist;\n          return _context.abrupt(\"return\", (0, _context.t0)(_context.t1, _context.t4, _context.t5));\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nvar setStoreReducer = function setStoreReducer(state, data) {\n  return _objectSpread({}, state, {}, data);\n}; // Context as global app store\n\n\nvar RootProvider = (0, _router.withRouter)(function (props) {\n  var loginStatus = props.loginStatus,\n      logout = props.logout,\n      children = props.children;\n\n  var _useReducer = (0, _react.useReducer)(setStoreReducer, _reducers.root_store_initial_state),\n      store = _useReducer[0],\n      setStore = _useReducer[1];\n\n  var actioner = function actioner(apiParams) {\n    var updater;\n    return _regenerator.default.async(function actioner$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            updater = {\n              api: apiParams,\n              toState: {},\n              signals: []\n            };\n            /** ARRAY:   if type is array we are able to make several\n             *           api request, reduce them, and then assign all data at once to the state\n             *  OBJECT:  single api request, reduce and state setter\n             */\n\n            if (!(updater.api instanceof Array)) {\n              _context3.next = 12;\n              break;\n            }\n\n            _context3.t0 = _assign.default;\n            _context3.t1 = {};\n            _context3.next = 6;\n            return _regenerator.default.awrap(_promise.default.all(updater.api.map(function _callee(single, x) {\n              return _regenerator.default.async(function _callee$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      updater.signals[x] = new window.AbortController();\n                      _context2.next = 3;\n                      return _regenerator.default.awrap(finalizeStore({\n                        store: store,\n                        actions: _actions.rootActions,\n                        reducer: _reducers.root_store_reducer\n                      }, single, {\n                        loginStatus: loginStatus,\n                        logout: logout\n                      }, updater.signals[x]));\n\n                    case 3:\n                      return _context2.abrupt(\"return\", _context2.sent);\n\n                    case 4:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              });\n            })));\n\n          case 6:\n            _context3.t2 = function (p, n) {\n              return (0, _assign.default)({}, p, n);\n            };\n\n            _context3.t3 = {};\n            _context3.t4 = _context3.sent.reduce(_context3.t2, _context3.t3);\n            updater.toState = (0, _context3.t0)(_context3.t1, _context3.t4);\n            _context3.next = 16;\n            break;\n\n          case 12:\n            updater.signals[0] = new window.AbortController();\n            _context3.next = 15;\n            return _regenerator.default.awrap(finalizeStore({\n              store: store,\n              actions: _actions.rootActions,\n              reducer: _reducers.root_store_reducer\n            }, apiParams, {\n              loginStatus: loginStatus,\n              logout: logout\n            }, updater.signals[0]));\n\n          case 15:\n            updater.toState = _context3.sent;\n\n          case 16:\n            if (!updater.toState) {\n              _context3.next = 23;\n              break;\n            }\n\n            if (!(apiParams.set !== false)) {\n              _context3.next = 22;\n              break;\n            }\n\n            setStore(updater.toState);\n            return _context3.abrupt(\"return\", updater.toState);\n\n          case 22:\n            return _context3.abrupt(\"return\", {\n              data: updater.toState,\n              set: setStore\n            });\n\n          case 23:\n            return _context3.abrupt(\"return\", function clean() {\n              updater.signals.map(function (s) {\n                s.abort();\n              });\n            });\n\n          case 24:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    });\n  };\n\n  var _useState = (0, _react.useState)(\"pc\"),\n      device = _useState[0],\n      _device = _useState[1];\n\n  var getScreenState = function getScreenState(e) {\n    e.preventDefault();\n\n    _device(function (s) {\n      var canSet = s === \"mobile\" && window.innerWidth > 768 ? \"pc\" : s === \"pc\" && window.innerWidth <= 768 ? \"mobile\" : false;\n\n      if (canSet) {\n        document.body.classList.remove(canSet === \"mobile\" ? \"pc\" : \"mobile\");\n        document.body.classList.add(canSet);\n      }\n\n      return canSet || s;\n    });\n  };\n\n  (0, _react.useEffect)(function () {\n    if (true) {\n      var dev = window.innerWidth > 768 ? \"pc\" : \"mobile\";\n\n      _device(dev);\n\n      document.body.classList.add(dev);\n      window.addEventListener(\"resize\", getScreenState);\n    }\n  }, []);\n\n  var api = function api(data) {\n    var signal = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return (0, _api.default)(data, signal, {\n      logout: logout,\n      loginStatus: state.loginStatus\n    });\n  };\n\n  return __jsx(RootContext.Provider, {\n    value: {\n      store: store,\n      actioner: actioner,\n      device: device,\n      setStore: setStore,\n      api: api\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, children);\n});\nexports.RootProvider = RootProvider;\nvar _default = RootContext;\nexports.default = _default;","map":{"version":3,"sources":["/Users/stanislavohstany/WebApps/DEV/coronamap/src/Context/index.js"],"names":["w","device","window","innerWidth","document","body","classList","add","RootContext","finalizeStore","single","signal","store","actions","reducer","loginStatus","logout","reduce","actionExist","action","api","data","setStoreReducer","state","RootProvider","props","children","root_store_initial_state","setStore","actioner","apiParams","updater","toState","signals","Array","all","map","x","AbortController","rootActions","root_store_reducer","p","n","set","clean","s","abort","_device","getScreenState","e","preventDefault","canSet","remove","dev","addEventListener"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useReducer, useState } from \"react\";\nimport bpis from \"api\";\n\nimport { withRouter } from \"next/router\";\n\nimport { root_store_reducer, root_store_initial_state } from \"./reducers\";\n\nimport { rootActions } from \"./actions\";\n\nconst w = { device: \"pc\" };\n\nif (typeof window !== \"undefined\") {\n\tw.device = window.innerWidth > 768 ? \"pc\" : \"mobile\";\n\tdocument.body.classList.add(w.device);\n}\n\n// common global context\nconst RootContext = createContext({});\n\nconst finalizeStore = async (\n\t{ store, actions, reducer },\n\tsingle,\n\t{ loginStatus, logout },\n\tsignal\n) => {\n\tconst { reduce } = single || {};\n\n\tif (!reduce) return false;\n\n\tconst actionExist = {\n\t\t...(actions[reduce] || {}),\n\t\t...single\n\t};\n\n\tif (!actionExist.action || actionExist.api === false) {\n\t\treturn reducer(store, {\n\t\t\treduce,\n\t\t\tdata: actionExist.data || false\n\t\t});\n\t}\n\n\treturn reducer(\n\t\tstore,\n\t\t{\n\t\t\treduce,\n\t\t\tdata: await bpis(actionExist, signal, {\n\t\t\t\tlogout,\n\t\t\t\tloginStatus\n\t\t\t})\n\t\t},\n\t\tactionExist\n\t);\n};\n\nconst setStoreReducer = (state, data) => {\n\treturn { ...state, ...data };\n};\n\n// Context as global app store\nexport const RootProvider = withRouter(props => {\n\tconst { loginStatus, logout, children } = props;\n\n\tconst [store, setStore] = useReducer(\n\t\tsetStoreReducer,\n\t\troot_store_initial_state\n\t);\n\n\tconst actioner = async apiParams => {\n\t\tconst updater = { api: apiParams, toState: {}, signals: [] };\n\t\t/** ARRAY:   if type is array we are able to make several\n\t\t *           api request, reduce them, and then assign all data at once to the state\n\t\t *  OBJECT:  single api request, reduce and state setter\n\t\t */\n\t\tif (updater.api instanceof Array) {\n\t\t\tupdater.toState = Object.assign(\n\t\t\t\t{},\n\t\t\t\t(\n\t\t\t\t\tawait Promise.all(\n\t\t\t\t\t\tupdater.api.map(async (single, x) => {\n\t\t\t\t\t\t\tupdater.signals[x] = new window.AbortController();\n\t\t\t\t\t\t\treturn await finalizeStore(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstore,\n\t\t\t\t\t\t\t\t\tactions: rootActions,\n\t\t\t\t\t\t\t\t\treducer: root_store_reducer\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsingle,\n\t\t\t\t\t\t\t\t{ loginStatus, logout },\n\t\t\t\t\t\t\t\tupdater.signals[x]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t).reduce((p, n) => Object.assign({}, p, n), {})\n\t\t\t);\n\t\t} else {\n\t\t\tupdater.signals[0] = new window.AbortController();\n\t\t\tupdater.toState = await finalizeStore(\n\t\t\t\t{ store, actions: rootActions, reducer: root_store_reducer },\n\t\t\t\tapiParams,\n\t\t\t\t{ loginStatus, logout },\n\t\t\t\tupdater.signals[0]\n\t\t\t);\n\t\t}\n\n\t\tif (updater.toState) {\n\t\t\tif (apiParams.set !== false) {\n\t\t\t\tsetStore(updater.toState);\n\t\t\t\treturn updater.toState;\n\t\t\t} else {\n\t\t\t\treturn { data: updater.toState, set: setStore };\n\t\t\t}\n\t\t}\n\n\t\treturn function clean() {\n\t\t\tupdater.signals.map(s => {\n\t\t\t\ts.abort();\n\t\t\t});\n\t\t};\n\t};\n\n\tconst [device, _device] = useState(\"pc\");\n\n\tconst getScreenState = e => {\n\t\te.preventDefault();\n\t\t_device(s => {\n\t\t\tconst canSet =\n\t\t\t\ts === \"mobile\" && window.innerWidth > 768\n\t\t\t\t\t? \"pc\"\n\t\t\t\t\t: s === \"pc\" && window.innerWidth <= 768\n\t\t\t\t\t? \"mobile\"\n\t\t\t\t\t: false;\n\t\t\tif (canSet) {\n\t\t\t\tdocument.body.classList.remove(\n\t\t\t\t\tcanSet === \"mobile\" ? \"pc\" : \"mobile\"\n\t\t\t\t);\n\t\t\t\tdocument.body.classList.add(canSet);\n\t\t\t}\n\t\t\treturn canSet || s;\n\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (typeof window !== \"undefined\") {\n\t\t\tconst dev = window.innerWidth > 768 ? \"pc\" : \"mobile\";\n\t\t\t_device(dev);\n\t\t\tdocument.body.classList.add(dev);\n\t\t\twindow.addEventListener(\"resize\", getScreenState);\n\t\t}\n\t}, []);\n\n\tconst api = (data, signal = false) => {\n\t\treturn bpis(data, signal, {\n\t\t\tlogout,\n\t\t\tloginStatus: state.loginStatus\n\t\t});\n\t};\n\n\treturn (\n\t\t<RootContext.Provider\n\t\t\tvalue={{\n\t\t\t\tstore,\n\t\t\t\tactioner,\n            device,\n            setStore,\n\t\t\t\tapi\n\t\t\t}}>\n\t\t\t{children}\n\t\t</RootContext.Provider>\n\t);\n});\n\nexport default RootContext;\n"]},"metadata":{},"sourceType":"script"}